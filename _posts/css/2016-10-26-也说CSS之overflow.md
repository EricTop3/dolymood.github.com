---
layout: post
category : css
tagline: ""
tags : [overflow, css]
---
{% include JB/setup %}

`overflow` 是一个非常常用的 CSS 属性，一般来说会认为很简单，其实细究之后就会发现他还有很多小特性或者说意想不到的结果；下面就介绍下（在浏览器环境下）关于 `overflow` 的小总结。

### 哪些元素上有效？

首先 `overflow` 是应用到哪些元素上有效的，任意元素？当然不是，它只能应用于块容器上。那什么是块容器呢，简单来说：除了 `table` 和可替换（置换）元素之外的块级元素都是块容器元素；但是反过来说块容器元素一定是块级元素的吗？当然也是 NO ，这是因为对于非替换的 `inline-block` 元素和 `table-cell` 元素而言，他们是块容器元素但是却不是块级元素。

### 作用

`overflow` 属性指定了一个块容器元素在其内容溢出这个元素的时候，内容是否裁掉。

### overflow的值

可以取的值有：`visible`（初始值）、 `hidden`、 `scroll`、`auto`、`inherit` 。

下面分别介绍下他们的含义：

<!--more-->

* __visible__
	
	这个属性表明内容不会被裁剪，所以说他可能超出渲染，也是初始值。

* __hidden__
	
	这个属性表明内容超出的部分需要裁剪掉。

* __scroll__
	
	这个属性表明超出内容不会裁剪掉，浏览器提供滚动机制来让用户看到超出内容，还有就是不管超出不超出他都是要显示的（也就是浏览器的滚动条背景的那个东东）。

* __auto__
	
	如果超出的话，应该有滚动条。

* __inherit__

	继承自他的父级元素（或者祖先元素）。

### 其他“作用”

* `overflow` 的值为非 `visible` 的时候可以生成新的 `BFC` （块级格式化上下文），常见的结果就是：消除浮动影响、左侧固定右侧自适应（不需要指定 `margin-left` ）、`margin` 不再折叠等。

* `overflow:hidden` 搭配 `white-space:nowrap`、`text-overflow:ellipsis`实现`...`效果。

* `overflow:hidden` 可以让 `1px`（ `scale(0.5)` 这种）显示的更加精细。

* `overflow:hidden` 可以解决移动端页面内容（一般文字内容相对多一点的时候效果更明显）会出现“进来左右方向缩小到一块”然后再变为正常布局的 bug ，这个过程当然会出现很明显的闪动效果。

### 疑问

在某些场景下就会遇到和上边所说的情况不一致的时候，下边来介绍下：

#### 一个页面，什么样式都不设置，但是里边很多内容，此时应该是什么样呢？

首先，初始值是 `visible` 没错，也就是说所有元素的 `overflow` 的值都是 `visible` 的，也就是说没有元素设置 `overflow:auto` ，但是结果确是浏览器会出现滚动条；这是因为规范规定了在这种情况下浏览器需要表现的像是类似于给 viewport 的根元素设置了 `overflow:auto` 类似的效果。

#### magin折叠？考虑下边的页面：

```html
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>overflow test</title>
	<style>
		body {margin:20px 0 0;overflow:hidden;}
		.content {width:200px;height:200px;background-color:#ccc;margin-top:50px;}
	</style>
</head>
<body>
	<div class="content"></div>
</body>
</html>
```

先来说理论上的效果应该是：我给 `body` 设置了 `overflow:hidden` ，也就意味着 `body` 元素会生成新的 `BFC` ，也就意味着此时 `.content` 的元素的 `margin` 上边界应该是在 `body` 元素的顶部开始计算的；但是实际的效果确是：

![body margin 折叠](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAewAAAJkCAMAAADk/+J6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYyNjRGOEZEOTQ1RTExRTZBNTIxRUE0Q0MwRDgzM0QwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjYyNjRGOEZFOTQ1RTExRTZBNTIxRUE0Q0MwRDgzM0QwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjI2NEY4RkI5NDVFMTFFNkE1MjFFQTRDQzBEODMzRDAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2NEY4RkM5NDVFMTFFNkE1MjFFQTRDQzBEODMzRDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7o6wgiAAADAFBMVEWOs9n///+f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)

和设想的很大差异，这里就涉及到了一种特殊情况，那就是如果说 viewport 的根元素 html 的 `overflow` 的值是 `visible` 且有 `body` 元素的情况下，就需要将 `body` 元素的 `overflow` 设置的值应用到 viewport 上，而这个 `body` 元素的 `overflow` 属性的使用值就是 `visible` ；正式因为如此，才会出现上图的情况，看起来就像是 `body` 元素和 `.content` 元素的 `margin` 发生了折叠一样的效果。

### 小结

上边就是关于 `overflow` 的基础以及一些小特性细节，当然可能还有其他好多未知的“情况”有待发掘，欢迎广大同行来“喷-喷”更多的 `overflow` ！
