---
layout: post
category : html
tagline: ""
tags : [html, html5]
---
{% include JB/setup %}


### 语法

HTML定义了“HTML语法”，他主要是兼容已在web上发布的HTML4和XHTML1文档，但是不兼容HTML4的那些深奥的SGML特性，例如[处理说明 processing instructions](http://www.w3.org/TR/1999/REC-html401-19991224/appendix/notes.html#h-B.3.6)和[简写标记 shorthand markup](http://www.w3.org/TR/1999/REC-html401-19991224/appendix/notes.html#h-B.3.7)这些，大部分的用户代理都不支持他们。使用`text/html`媒介类型的文档使用HTML语法。

<!--more-->

HTML也定义了解析规则的细节（包括错误处理）的相关语法，这主要是为了兼容HTML4时代的实现。对于有`text/html`媒介类型的资源，用户代理不得不用这些规则。这里就有一个符合HTML语法的例子：

```html
<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Example document</title>
  </head>
  <body>
    <p>Example paragraph</p>
  </body>
</html>
```

能给HTML使用的另外一种语法就是XML。这种语法兼容XHTML1文档和实现。使用这种语法的文档需要和XML媒介类型（例如`application/xhtml+xml`或者`application/xml`）搭配，且元素需要根据XML规范设定的规则放在 _http://www.w3.org/1999/xhtml_ 命名空间中。[XML](http://www.w3.org/TR/xml/) [XMLNS](http://www.w3.org/TR/xml-names/)

下面的示例文档就是兼容XML语法的HTML。

```xhtml
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Example document</title>
  </head>
  <body>
    <p>Example paragraph</p>
  </body>
</html>
```

#### 字符编码

对于HTML语法，Web开发者需要声明字符编码。有三种方式来设置：

* 在传输层；例如，通过使用HTTP的`Content-Type`头。

* 在文件开始的地方使用Unicode BOM(Byte Order Mark) 字符。这个字符提供使用编码的标记。

* 使用在文档的前1024字节中带有指定编码的[charset](http://www.w3.org/TR/html5/single-page.html#attr-meta-charset)属性的[meta](http://www.w3.org/TR/html5/single-page.html#the-meta-element)元素；例如，`<meta charset="UTF-8">`能用来指定UTF-8编码。他替换了`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`（尽管该语法仍然可以使用）的需求。

对于XML语法，Web开发者必须使用在XML规范中设定的规则来指定字符编码。

#### Doctype

HTML语法需要指定doctype来确保浏览器在标准模式下渲染页面。doctype没有其他的用途。[Doctype](https://hsivonen.fi/doctype/)

HTML语法中doctype声明是`<!DOCTYPE html>`这样的，且不区分大小写。HTML早先的doctype版本更长，这是因为HTML语言是基于SGML的，因此需要引用一个DTD。现在情况已不是这样了，doctype仅仅用来触发使用HTML语法书写的文档的标准模式。浏览器已经支持了`<!DOCTYPE html>`。

在HTML语法中，为了支持不能生成最短doctype的传统的标记生成器，`<!DOCTYPE html SYSTEM "about:legacy-compat">`这个doctype也是允许的。

在HTML的语法中，HTML4.0、HTML4.01、XHTML1.0以及XHTML1.1的标准的doctype也是允许的。

在XML语法中，可能会使用任意的doctype声明，或者可能完全省略掉。带有XML媒介类型的文档往往以标准模式处理。

#### MathML和SVG

HTML语法允许在文档中使用MathML和SVG元素。`math`或者`svg`起始标签能使得HTML解析器切换到特殊的插入模式，这种模式会将元素和属性放进合适的命名空间中，且会修正有大小写混合的元素和属性，以及支持像在XML中的空元素语法。这种语法仍然是不区分大小写的且属性语法如同HTML元素的属性的语法。命名空间的声明可以省略。在插入模式中CDATA段落也是支持的。

一些MathML和SVG元素使得解析器切回到“HTML模式”，例如：`mtext`和`foreignObject`，因此你能使用HTML元素或者新的`math`或者`svg`元素。

例如，一个使用一些最低限度的语法特性的简单文档可能是这样的：

```html
<!doctype html>
<title>SVG in text/html</title>
<p>
 A green circle:
 <svg> <circle r="50" cx="50" cy="50" fill="green"/> </svg>
</p>
```

#### 其他

在HTML语法中，也有涉及一些其他的几个改动：

* `&lang;`和`&rang;`命名字符引用现在拓展到了 U+27E8 和 U+27E9（数学上的左/右角度括号） ，分别替代了 U+2329 和 U+232A （left/right-pointing角度括号）。

* 增加了很多新的命名字符引用，包括在MathML中的所有命名字符引用。

* 可空元素（在HTML4中是空元素）允许有一个尾斜杠。

* 和HTML4相比，`&`在更多情况下可以不转义。

* 属性之间必须至少有个空格符分割。

* 值为空的属性可以仅仅只有属性名，等号和值都是可以省略的，即使属性不是一个布尔属性也一样如此。（在HTML4中，普遍允许的省略的情况是该属性是一个布尔属性。实际上，对于可枚举的属性，HTML4允许仅使用属性值且省略属性名，但是没有浏览器支持。）

* 和HTML4相比，属性值可以省略引号，这样就能使用更大字符集。

* HTML解析器不会给属性值做任何的空白做归一化处理；例如，`id`属性的前导和结尾空白是不能被忽略的（因此现在就是无效的），且换行符能在不用字符引用的情况下在`input`元素的`value`值中使用。

* `optgroup`的结束标签是可以省略的。

* `colgroup`的起始标签现在是可以省略的，且会由HTML解析器自动推断出来。

### 语言

本段落分成了几个小段落，这样可以更加清楚的阐述和HTML4各个方面的不同。

#### 新元素

下边介绍一些为了更好的结构化而生的元素：

* [section](http://www.w3.org/TR/html5/single-page.html#the-section-element)代表了一般文档或者应用段落。他可以和[h1](http://www.w3.org/TR/html5/single-page.html#the-h1-element)、[h2](http://www.w3.org/TR/html5/single-page.html#the-h2-element)、[h3](http://www.w3.org/TR/html5/single-page.html#the-h3-element)、[h4](http://www.w3.org/TR/html5/single-page.html#the-h4-element)、[h5](http://www.w3.org/TR/html5/single-page.html#the-h5-element)以及[h6](http://www.w3.org/TR/html5/single-page.html#the-h6-element)元素一起使用来表明文档结构。

* [article](http://www.w3.org/TR/html5/single-page.html#the-article-element)代表了一个文档中的独立的内容片段，例如博客条目或者报纸文章。

* [main](http://www.w3.org/TR/html5/single-page.html#the-main-element)代表了一个文档或者应用的body的主要内容。

* [aside](http://www.w3.org/TR/html5/single-page.html#the-aside-element)代表了一块仅仅稍微和页面其余部分相关的内容。

* [header](http://www.w3.org/TR/html5/single-page.html#the-header-element)代表了一组介绍性或者导航性的内容，也就是页眉。

* [footer](http://www.w3.org/TR/html5/single-page.html#the-footer-element)代表了一个段落的页脚，能包含作者、版权信息等。

* [nav](http://www.w3.org/TR/html5/single-page.html#the-nav-element)代表了文档导航的段落。

* [figure](http://www.w3.org/TR/html5/single-page.html#the-figure-element)代表了独立的流内容，一般是作为文档主流内容的一个单独的单元。

```html
	<figure>
	 <video src="example.webm" controls></video>
	 <figcaption>Example</figcaption>
	</figure>
```

	[figcaption](http://www.w3.org/TR/html5/single-page.html#the-figcaption-element)可以作为标题使用（可选）。

* [template](http://www.w3.org/TR/html5/single-page.html#the-template-element)能作为声明可以通过脚本来克隆和插入到文档中的HTML片段来使用。

然后还有一些其他的新元素：

* [video](http://www.w3.org/TR/html5/single-page.html#the-video-element)和[audio](http://www.w3.org/TR/html5/single-page.html#the-audio-element)来丰富多媒体内容。都会提供API，这样Web开发者能用脚本来自定义他们的用户界面，但是同样也有方式来触发用户代理提供的用户界面。如果有不同的类型的可用多媒体流使用的话，[source](http://www.w3.org/TR/html5/single-page.html#the-source-element)元素是和这些元素一起使用。

* [track](http://www.w3.org/TR/html5/single-page.html#the-track-element)为`video`元素提供文本轨道。

* [embed](http://www.w3.org/TR/html5/single-page.html#the-embed-element)用来嵌入内容。

* [mark](http://www.w3.org/TR/html5/single-page.html#the-mark-element)元素代表文档中带有记号的文本或者引用高亮的目的，这取决于他和另外上下文关联性。

* [progress](http://www.w3.org/TR/html5/single-page.html#the-progress-element)代表一个任务的进度，例如下载或者表现一系列复杂操作时。

* [meter](http://www.w3.org/TR/html5/single-page.html#the-meter-element)代表了测量，例如磁盘使用情况。

* [time](http://www.w3.org/TR/html5/single-page.html#the-time-element)代表日期时间。

* [ruby](http://www.w3.org/TR/html5/single-page.html#the-ruby-element)、[rt](http://www.w3.org/TR/html5/single-page.html#the-rt-element)和[rt](http://www.w3.org/TR/html5/single-page.html#the-rt-element)用来标记ruby注释。

* [bdi](http://www.w3.org/TR/html5/single-page.html#the-bdi-element)代表了一个段文本，使其脱离父元素的文本方向设置。

* [wbr](http://www.w3.org/TR/html5/single-page.html#the-wbr-element)代表了一个换行时机。

* [canvas](http://www.w3.org/TR/html5/single-page.html#the-canvas-element)用来在画布上渲染动态位图图形，例如图形或者游戏。

* [datalist](http://www.w3.org/TR/html5/single-page.html#the-datalist-element)和[input](http://www.w3.org/TR/html5/single-page.html#the-input-element)的新的[list](http://www.w3.org/TR/html5/single-page.html#attr-input-list)属性一起来制作下拉列表框。

```html
<input list="browsers">
<datalist id="browsers">
 <option value="Safari">
 <option value="Internet Explorer">
 <option value="Opera">
 <option value="Firefox">
</datalist>
```

* [keygen](http://www.w3.org/TR/html5/single-page.html#the-keygen-element)代表控制表单的密钥对生成器。

* [output](http://www.w3.org/TR/html5/single-page.html#the-output-element)代表一些输出类型，例如通过脚本输出计算结果。

[input](http://www.w3.org/TR/html5/single-page.html#the-input-element)的[type](http://www.w3.org/TR/html5/single-page.html#attr-input-type)属性现在有如下新的值：

* [tel](http://www.w3.org/TR/html5/single-page.html#telephone-state-(type=tel))

* [search](http://www.w3.org/TR/html5/single-page.html#text-(type=text)-state-and-search-state-(type=search))

* [url](http://www.w3.org/TR/html5/single-page.html#url-state-(type=url))

* [email](http://www.w3.org/TR/html5/single-page.html#e-mail-state-(type=email))

* [date](http://www.w3.org/TR/html5/single-page.html#date-state-(type=date))

* [time](http://www.w3.org/TR/html5/single-page.html#time-state-(type=time))

* [number](http://www.w3.org/TR/html5/single-page.html#number-state-(type=number))

* [range](http://www.w3.org/TR/html5/single-page.html#range-state-(type=range))

* [color](http://www.w3.org/TR/html5/single-page.html#color-state-(type=color))

这些新的类型的想法是用户代理能够提供的用户界面，例如一个带有用户通讯簿的日历，且可以给服务器定义一个格式。这在将数据发送到服务端校验会省不少时间，给用户提供了一个更好的体验。

#### 新的属性

部分是已经在HTML4中引进了各种各样的元素的属性：

* [area](http://www.w3.org/TR/html5/single-page.html#the-area-element)元素，为了和[a](http://www.w3.org/TR/html5/single-page.html#the-a-element)和[link](http://www.w3.org/TR/html5/single-page.html#the-link-element)元素保持一致，也有了[hreflang](http://www.w3.org/TR/html5/single-page.html#attr-hyperlink-hreflang)、[type](http://www.w3.org/TR/html5/single-page.html#attr-hyperlink-type)和[rel](http://www.w3.org/TR/html5/single-page.html#attr-hyperlink-rel)属性。

* [base](http://www.w3.org/TR/html5/single-page.html#the-base-element)元素现在也能有[target](http://www.w3.org/TR/html5/single-page.html#attr-base-target)属性了，主要是为了考虑和[a](http://www.w3.org/TR/html5/single-page.html#the-a-element)元素保持一致。（这个已经被普遍支持了）

* [meta](http://www.w3.org/TR/html5/single-page.html#the-meta-element)元素现在有了[charset](http://www.w3.org/TR/html5/single-page.html#attr-meta-charset)属性，这个现在已经被广泛支持了且提供了一种很好的方式来指定文档的_字符编码_。

* 新的[autofocus](http://www.w3.org/TR/html5/single-page.html#attr-fe-autofocus)属性可以指定在[input](http://www.w3.org/TR/html5/single-page.html#the-input-element)元素（除了当[type](http://www.w3.org/TR/html5/single-page.html#attr-input-type)属性是[hidden](http://www.w3.org/TR/html5/single-page.html#hidden-state-(type=hidden))）、[select](http://www.w3.org/TR/html5/single-page.html#the-select-element)、[textarea](http://www.w3.org/TR/html5/single-page.html#the-textarea-element)以及[button](http://www.w3.org/TR/html5/single-page.html#the-button-element)元素上。他提供了一种声明式的方式在页面加载过程中聚焦到表单项上。使用这个特性可以提升用户体验（和利用脚本聚焦元素相比），例如，用户可以关闭它，如果用户不喜欢他的话。

* 新的[placeholder](http://www.w3.org/TR/html5/single-page.html#attr-input-placeholder)属性可以指定在[input](http://www.w3.org/TR/html5/single-page.html#the-input-element)和[textarea](http://www.w3.org/TR/html5/single-page.html#the-textarea-element)元素上。他代表了一个暗示（示意）来帮助用户输入数据。

```html
<input type=search name=q placeholder="Enter search phrase..."> <button>Search</button>
<label>Email <input type=email name=email placeholder="john@example.com"></label>
```

[placeholder](http://www.w3.org/TR/html5/single-page.html#attr-input-placeholder)属性不应该作为[label](http://www.w3.org/TR/html5/single-page.html#the-label-element)元素的替代者。

```
<!-- Do not do this: -->
<input type=email name=email placeholder="Email">
```

* [input](http://www.w3.org/TR/html5/single-page.html#the-input-element)、[output](http://www.w3.org/TR/html5/single-page.html#the-output-element)、[select](http://www.w3.org/TR/html5/single-page.html#the-select-element)、[textarea](http://www.w3.org/TR/html5/single-page.html#the-textarea-element)、[button](http://www.w3.org/TR/html5/single-page.html#the-button-element)、[label](http://www.w3.org/TR/html5/single-page.html#the-label-element)、[object](http://www.w3.org/TR/html5/single-page.html#the-object-element)和[fieldset](http://www.w3.org/TR/html5/single-page.html#the-fieldset-element)元素们的新的[form](http://www.w3.org/TR/html5/single-page.html#attr-fae-form)属性，允许控制一个相关联的表单。这些元素现在能放在一个页面的任何地方，而不仅仅只能是[form](http://www.w3.org/TR/html5/single-page.html#the-form-element)元素的子节点，但是扔能够控制一个[form](http://www.w3.org/TR/html5/single-page.html#the-form-element)元素。

```html
<table>
 <tr>
  <th>Key
  <th>Value
  <th>Action
 <tr>
  <td><form id=1><input name=1-key></form>
  <td><input form=1 name=1-value>
  <td><button form=1 name=1-action value=save>√</button>
      <button form=1 name=1-action value=delete>×</button>
 ...
</table>
```

* 应用在[input](http://www.w3.org/TR/html5/single-page.html#the-input-element)元素（除了当[type](http://www.w3.org/TR/html5/single-page.html#attr-input-type)属性是[hidden](http://www.w3.org/TR/html5/single-page.html#hidden-state-(type=hidden))、[image](http://www.w3.org/TR/html5/single-page.html#image-button-state-(type=image))或者一些按钮类型，例如[submit](http://www.w3.org/TR/html5/single-page.html#submit-button-state-(type=submit))），[select](http://www.w3.org/TR/html5/single-page.html#the-select-element)以及[textarea](http://www.w3.org/TR/html5/single-page.html#the-textarea-element)元素上的新的[require](http://www.w3.org/TR/html5/single-page.html#attr-input-required)，他指定用户必须输入内容才能提交表单。对于[select](http://www.w3.org/TR/html5/single-page.html#the-select-element)，第一个[option](http://www.w3.org/TR/html5/single-page.html#the-option-element)元素的值如果为空，那么必须有一个占位符。

```html
<label>Color: <select name=color required>
 <option value="">Choose one
 <option>Red
 <option>Green
 <option>Blue
</select></label>
```

* [fieldset](http://www.w3.org/TR/html5/single-page.html#the-fieldset-element)元素现在允许指定[disabled](http://www.w3.org/TR/html5/single-page.html#attr-fieldset-disabled)属性，他可以禁用掉所有子控制项（除了那些是[legend](http://www.w3.org/TR/html5/single-page.html#the-legend-element)元素的孩子），且[name](http://www.w3.org/TR/html5/single-page.html#attr-fe-name)属性可以通过脚本访问。

* [input](http://www.w3.org/TR/html5/single-page.html#the-input-element)元素有一些新的属性来指定约束：[autocomplete](http://www.w3.org/TR/html5/single-page.html#attr-fe-autocomplete)、[min](http://www.w3.org/TR/html5/single-page.html#attr-input-min)、[max](http://www.w3.org/TR/html5/single-page.html#attr-input-max)、[multiple](http://www.w3.org/TR/html5/single-page.html#attr-input-multiple)、[pattern](http://www.w3.org/TR/html5/single-page.html#attr-input-pattern)和[step](http://www.w3.org/TR/html5/single-page.html#attr-input-step)。像之前涉及的，他也有新的[list](http://www.w3.org/TR/html5/single-page.html#attr-input-list)属性，可以用来和[datalist](http://www.w3.org/TR/html5/single-page.html#the-datalist-element)元素一起使用。当使用`type=image`时，他现在也有[width](http://www.w3.org/TR/html5/single-page.html#attr-dim-width)和[height](http://www.w3.org/TR/html5/single-page.html#attr-dim-height)属性来指定图片尺寸。

* [input](http://www.w3.org/TR/html5/single-page.html#the-input-element)和[textarea](http://www.w3.org/TR/html5/single-page.html#the-textarea-element)元素有意的新的属性[dirname](http://www.w3.org/TR/html5/single-page.html#attr-fe-dirname)，他会使得如同用户设置的控制项的方向性一样可以被提交。

* [textarea](http://www.w3.org/TR/html5/single-page.html#the-textarea-element)元素也有三个新的属性： [maxlength](http://www.w3.org/TR/html5/single-page.html#attr-textarea-maxlength)、[minlength](http://www.w3.org/TR/html5/single-page.html#attr-textarea-minlength) and [wrap](http://www.w3.org/TR/html5/single-page.html#attr-textarea-wrap)，他们分别控制的是输入最大长度，最小长度以及提交的行行为（文本中文字如何换行）。

* [form](http://www.w3.org/TR/html5/single-page.html#the-form-element)元素有一个[novalidate](http://www.w3.org/TR/html5/single-page.html#attr-fs-novalidate)属性，用来禁用掉表单提交验证。

* [input](http://www.w3.org/TR/html5/single-page.html#the-input-element) 和[button](http://www.w3.org/TR/html5/single-page.html#the-button-element)元素也有：[formaction](http://www.w3.org/TR/html5/single-page.html#attr-fs-formaction)、 [formenctype](http://www.w3.org/TR/html5/single-page.html#attr-fs-formenctype)、[formmethod](http://www.w3.org/TR/html5/single-page.html#attr-fs-formmethod)、[formnovalidate](http://www.w3.org/TR/html5/single-page.html#attr-fs-formnovalidate)以及[formtarget](http://www.w3.org/TR/html5/single-page.html#attr-fs-formtarget)新属性。. 目前，他们分别替换[form](http://www.w3.org/TR/html5/single-page.html#the-form-element)元素的[action](http://www.w3.org/TR/html5/single-page.html#attr-fs-action)、[enctype](http://www.w3.org/TR/html5/single-page.html#attr-fs-enctype)、[method](http://www.w3.org/TR/html5/single-page.html#attr-fs-method)、[novalidate](http://www.w3.org/TR/html5/single-page.html#attr-fs-novalidate)以及[target](http://www.w3.org/TR/html5/single-page.html#attr-fs-target)属性。

* [input](http://www.w3.org/TR/html5/single-page.html#the-input-element)元素也有新的[minlength](http://www.w3.org/TR/html5/single-page.html#attr-input-minlength)属性。

* [script](http://www.w3.org/TR/html5/single-page.html#the-script-element)元素有新的[async](http://www.w3.org/TR/html5/single-page.html#attr-script-async)属性，他影响脚本加载和执行。

* [html](http://www.w3.org/TR/html5/single-page.html#the-html-element)元素有新的[manifest](http://www.w3.org/TR/html5/single-page.html#attr-html-manifest)属性，指明和离线Web应用的API相结合的应用中的缓存清单。

* [link](http://www.w3.org/TR/html5/single-page.html#the-link-element)元素有新的[sizes](http://www.w3.org/TR/html5/single-page.html#attr-link-sizes)属性。它能够用在指明引用[icon](http://www.w3.org/TR/html5/single-page.html#rel-icon)有关的（例如，通过[rel](http://www.w3.org/TR/html5/single-page.html#attr-link-rel)属性）尺寸上，因此能允许不同尺寸的图标icon。

* [ol](http://www.w3.org/TR/html5/single-page.html#the-ol-element)元素有[reversed](http://www.w3.org/TR/html5/single-page.html#attr-ol-reversed)属性。当前，他指定的是列表子元素顺序。

* [iframe](http://www.w3.org/TR/html5/single-page.html#the-iframe-element)元素有[sandbox](http://www.w3.org/TR/html5/single-page.html#attr-iframe-sandbox)和[srcdoc](http://www.w3.org/TR/html5/single-page.html#attr-iframe-srcdoc)属性，他们允许沙箱上下文，例如，博客评论。

* [object](http://www.w3.org/TR/html5/single-page.html#the-object-element)有新的[typemustmatch](http://www.w3.org/TR/html5/single-page.html#attr-object-typemustmatch)属性，他允许更加安全的嵌入外部资源。

* [img](http://www.w3.org/TR/html5/single-page.html#the-img-element)元素有新的[crossorigin](http://www.w3.org/TR/html5/single-page.html#attr-img-crossorigin)属性，可以使用CORS拉取资源，如果成功了，允许图片数据能够被[canvas](http://www.w3.org/TR/html5/single-page.html#the-canvas-element) API读取。

